<project name="Revo" default="test" basedir=".">
    <description>
       Reta Vortaro, reguloj por artikoloj.
    </description>

  <!-- legu agorditajn variablojn el dosiero -->
  <property file="${user.dir}/cfg/agordo" prefix="mi."/>

  <!-- donu valorojn al la variabloj, se ili ne jam aperis en la agordo-dosiero -->
  <property name="mi.voko" location="/home/revo/voko"/>
  <property name="mi.voko.ant" location="${mi.voko}/ant"/>
  <property name="mi.bazo" location="${user.dir}"/>
  <property name="mi.bazo.inx" location="${mi.bazo}/inx"/>
  <property name="mi.bazo.xml" location="${mi.bazo}/xml"/>
  <property name="mi.bazo.art" location="${mi.bazo}/art"/>
  <property name="mi.voko.bin" location="${mi.voko}/bin"/>
  <property name="mi.voko.xsl" location="${mi.voko}/xsl"/>
  <!-- property name="tmp" location="/home/revo/tmp/inx_tmp"/ -->
  <property name="mi.tmp" location="${mi.bazo}/.tmp"/>
  <property name="mi.outputformat" value="html"/>

  <property name="saxon" location="/usr/local/lib/saxon/saxon8.jar"/>


  <target name="init">
    <!-- Create the time stamp -->
    <tstamp/>
    <!-- Create the build directory structure used by compile -->
    <mkdir dir="${mi.bazo.art}" />
    <mkdir dir="${mi.tmp}" />
    <mkdir dir="${mi.tmp}/art" />

    <!-- chu necesas refari la dosieron indekso.xml? -->
    <!-- uptodate property="indekso.aktuala">
      <srcfiles dir="${mi.bazo.xml}" includes="*.xml"/>
      <mapper type="merge" to="${mi.tmp}/indekso.xml"/>
    </uptodate -->

  </target>



  <target name="artikoloj" depends="init" 
       description="kreas artikolojn el shanghitaj xml-dosieroj">

    <xslt includes="${mi.bazo.xml}/*.xml" destdir="${mi.tmp}/art/" extension=".xml"
       style="${mi.voko.xsl}/revo_tez.xsl"/>

    <xslt includes="${mi.tmp}/art/*.xml" destdir="${mi.tmp}/art/" extension=".html"
       style="${mi.voko.xsl}/revohtml2.xsl"/>
  </target>

 
  <!-- target name="malnovaj" depends="init"
       description="rekreas kelkajn malnovajn artikolojn por certigi, ke
                stilshanghoj iom post iom atingu chiujn artikolojn">

      <xslt include="${mi.bazo.xml}/*.xml" destdir="${mi.tmp}/art/" extension=".xml"
       style="${mi.voko.xsl}/revo_tez.xsl">
        <custom classname="de.steloj.respiro.DateMaxFilesSelector" classpath="${mi.voko.ant}/respiro.jar">
          <xxx param name="targetDir" value="${mi.tez}"/>
          <xxx param name="ignoreFileTimes" value="true"/>
          <param name="maxFiles" value="50"/> <!-- aktualigu maksimume 50 dosierojn -->
        </custom>
      </xslt>


  </target -->



  <target name="tuto" depends="artikoloj"
       description="kopias shanghitajn artikolojn al la destin-dosierujo">
    <copy todir="${mi.bazo.art}">
      <fileset dir="${mi.tmp}/art" includes="*.html">
        <different targetdir="${mi.bazo.art}" ignoreFileTimes="true"/>
      </fileset>
    </copy>

  </target>



</project>